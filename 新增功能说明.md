# ğŸ‰ æ–°å¢åŠŸèƒ½è¯´æ˜ - ä½¿ç”¨çœŸå®Gmailæ•°æ®è®­ç»ƒæ¨¡å‹

## ğŸ“¦ æ–°å¢æ–‡ä»¶åˆ—è¡¨

### æ ¸å¿ƒè„šæœ¬
| æ–‡ä»¶ | è¯´æ˜ | ç”¨é€” |
|------|------|------|
| `prepare_training_data.py` | æ•°æ®å‡†å¤‡è„šæœ¬ | åˆå¹¶å’Œè½¬æ¢Gmailå¯¼å‡ºæ•°æ®ä¸ºè®­ç»ƒæ ¼å¼ |
| `train_with_gmail.ps1` | Windowsè‡ªåŠ¨åŒ–è„šæœ¬ | ä¸€é”®å®Œæˆå¯¼å‡ºã€å‡†å¤‡ã€è®­ç»ƒå…¨æµç¨‹ |
| `train_with_gmail.sh` | Linux/Macè‡ªåŠ¨åŒ–è„šæœ¬ | ä¸€é”®å®Œæˆå¯¼å‡ºã€å‡†å¤‡ã€è®­ç»ƒå…¨æµç¨‹ |

### æ–‡æ¡£æŒ‡å—
| æ–‡ä»¶ | è¯´æ˜ | é€‚åˆ |
|------|------|------|
| `TRAIN_WITH_REAL_GMAIL_DATA.md` | å®Œæ•´è®­ç»ƒæŒ‡å— | è¯¦ç»†äº†è§£æ•´ä¸ªæµç¨‹ |
| `QUICK_TRAIN_REFERENCE.md` | å¿«é€Ÿå‚è€ƒå¡ç‰‡ | å¿«é€ŸæŸ¥æ‰¾å‘½ä»¤ |
| `TRAINING_SUMMARY.md` | è®­ç»ƒæŠ¥å‘Š | æŸ¥çœ‹å½“å‰æ¨¡å‹çŠ¶æ€å’Œæ”¹è¿›å»ºè®® |
| `ä½¿ç”¨çœŸå®æ•°æ®è®­ç»ƒ_å¿«é€Ÿå¼€å§‹.md` | ä¸­æ–‡å¿«é€Ÿå¼€å§‹ | ç«‹å³å¼€å§‹ä½¿ç”¨ |
| `æ–°å¢åŠŸèƒ½è¯´æ˜.md` | æœ¬æ–‡æ¡£ | äº†è§£æ–°å¢åŠŸèƒ½ |

### ç”Ÿæˆçš„æ•°æ®æ–‡ä»¶
| æ–‡ä»¶ | è¯´æ˜ | æ¥æº |
|------|------|------|
| `emails_real.csv` | å‡†å¤‡å¥½çš„è®­ç»ƒæ•°æ® | ç”± prepare_training_data.py ç”Ÿæˆ |
| `model.pkl` | è®­ç»ƒå¥½çš„æ¨¡å‹ | ç”± train_model.py ç”Ÿæˆ |
| `vectorizer.pkl` | æ–‡æœ¬å‘é‡åŒ–å™¨ | ç”± train_model.py ç”Ÿæˆ |

### å·²æ›´æ–°çš„æ–‡ä»¶
| æ–‡ä»¶ | æ›´æ–°å†…å®¹ |
|------|----------|
| `train_model.py` | æ·»åŠ å‘½ä»¤è¡Œå‚æ•°æ”¯æŒï¼Œå¯é€‰æ‹©æ•°æ®æº |

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### æ–¹å¼1: ä¸€é”®è‡ªåŠ¨åŒ–ï¼ˆæ¨èï¼‰

**Windows:**
```powershell
.\train_with_gmail.ps1
```

**Linux/Mac:**
```bash
chmod +x train_with_gmail.sh
./train_with_gmail.sh
```

### æ–¹å¼2: æ‰‹åŠ¨æ‰§è¡Œ

```bash
# 1. å¯¼å‡ºæ•°æ®
$env:JOBTRACK_SESSION_ID='ä½ çš„session_id'
node scripts/export-gmail-training-data.js --query "in:inbox" --maxResults 500

# 2. å‡†å¤‡æ•°æ®
python prepare_training_data.py

# 3. è®­ç»ƒæ¨¡å‹
python train_model.py --data emails_real.csv
```

---

## âœ¨ ä¸»è¦åŠŸèƒ½

### 1. æ•°æ®å‡†å¤‡è„šæœ¬ (prepare_training_data.py)

**åŠŸèƒ½ï¼š**
- ğŸ” è‡ªåŠ¨æ‰«æ `backend/export/` ç›®å½•ä¸­çš„æ‰€æœ‰CSVæ–‡ä»¶
- ğŸ”„ åˆå¹¶å¤šä¸ªå¯¼å‡ºæ–‡ä»¶
- ğŸ§¹ è¿‡æ»¤æ— æ ‡ç­¾å’Œè¢«è·³è¿‡çš„é‚®ä»¶
- ğŸ—‘ï¸ å»é™¤é‡å¤é‚®ä»¶
- ğŸ“Š æ˜¾ç¤ºè¯¦ç»†çš„æ•°æ®ç»Ÿè®¡
- âœ… ç”Ÿæˆ `emails_real.csv` è®­ç»ƒæ–‡ä»¶

**ä½¿ç”¨ï¼š**
```bash
python prepare_training_data.py
```

**è¾“å‡ºç¤ºä¾‹ï¼š**
```
âœ… è®­ç»ƒæ•°æ®å·²ä¿å­˜åˆ°: emails_real.csv
ğŸ“ æ€»å…± 302 æ¡æœ‰æ ‡ç­¾çš„é‚®ä»¶
ğŸ·ï¸  åŒ…å« 3 ä¸ªä¸åŒçš„æ ‡ç­¾
```

### 2. å¢å¼ºçš„è®­ç»ƒè„šæœ¬ (train_model.py)

**æ–°åŠŸèƒ½ï¼š**
- ğŸ“ æ”¯æŒå‘½ä»¤è¡Œå‚æ•°é€‰æ‹©æ•°æ®æº
- âœ… æ–‡ä»¶å­˜åœ¨æ£€æŸ¥
- ğŸ“Š è¯¦ç»†çš„è®­ç»ƒè¾“å‡º
- ğŸ¯ æ¸…æ™°çš„é”™è¯¯æç¤º

**ä½¿ç”¨ï¼š**
```bash
# ä½¿ç”¨çœŸå®æ•°æ®
python train_model.py --data emails_real.csv

# ä½¿ç”¨mockæ•°æ®
python train_model.py --data emails.csv

# ä½¿ç”¨é»˜è®¤æ•°æ®
python train_model.py

# æŸ¥çœ‹å¸®åŠ©
python train_model.py --help
```

### 3. è‡ªåŠ¨åŒ–è®­ç»ƒè„šæœ¬

**train_with_gmail.ps1 / train_with_gmail.sh**

**åŠŸèƒ½ï¼š**
- âœ… ç¯å¢ƒæ£€æŸ¥ï¼ˆPython, Node.jsï¼‰
- ğŸ“¬ è‡ªåŠ¨å¯¼å‡ºGmailæ•°æ®
- ğŸ”„ è‡ªåŠ¨å‡†å¤‡è®­ç»ƒæ•°æ®
- ğŸ¤– è‡ªåŠ¨è®­ç»ƒæ¨¡å‹
- ğŸ’¾ è‡ªåŠ¨å¤‡ä»½æ¨¡å‹æ–‡ä»¶
- ğŸ¨ ç¾è§‚çš„è¿›åº¦æ˜¾ç¤º

**å‚æ•°ï¼š**

**PowerShell:**
```powershell
# åŸºæœ¬ä½¿ç”¨ï¼ˆäº¤äº’å¼ï¼‰
.\train_with_gmail.ps1

# æä¾›Session ID
.\train_with_gmail.ps1 -SessionId "your_session_id"

# è‡ªå®šä¹‰å¯¼å‡ºæ•°é‡
.\train_with_gmail.ps1 -SessionId "your_id" -MaxResults 1000

# è·³è¿‡å¯¼å‡ºï¼Œåªè®­ç»ƒ
.\train_with_gmail.ps1 -SkipExport
```

**Bash:**
```bash
# åŸºæœ¬ä½¿ç”¨
./train_with_gmail.sh

# æä¾›å‚æ•°
./train_with_gmail.sh "your_session_id" 500 "in:inbox"

# è·³è¿‡å¯¼å‡º
SKIP_EXPORT=true ./train_with_gmail.sh
```

---

## ğŸ“Š å·¥ä½œæµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  1. Gmailé‚®ä»¶ï¼ˆå·²æ ‡è®°ï¼‰                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  2. å¯¼å‡ºæ•°æ®                                             â”‚
â”‚     node scripts/export-gmail-training-data.js          â”‚
â”‚     â†“                                                    â”‚
â”‚     backend/export/training-*.csv                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  3. å‡†å¤‡æ•°æ®                                             â”‚
â”‚     python prepare_training_data.py                     â”‚
â”‚     â†“                                                    â”‚
â”‚     emails_real.csv                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  4. è®­ç»ƒæ¨¡å‹                                             â”‚
â”‚     python train_model.py --data emails_real.csv        â”‚
â”‚     â†“                                                    â”‚
â”‚     model.pkl + vectorizer.pkl                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  5. ä½¿ç”¨æ¨¡å‹                                             â”‚
â”‚     - Chromeæ‰©å±•è‡ªåŠ¨åˆ†ç±»                                 â”‚
â”‚     - åç«¯APIåˆ†ç±»æœåŠ¡                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¯ ä½ çš„å½“å‰çŠ¶æ€

æ ¹æ®åˆšæ‰çš„æµ‹è¯•è¿è¡Œï¼š

| é¡¹ç›® | çŠ¶æ€ | è¯¦æƒ… |
|------|------|------|
| âœ… çœŸå®æ•°æ® | å·²å‡†å¤‡ | 302æ¡é‚®ä»¶ |
| âœ… æ¨¡å‹è®­ç»ƒ | å·²å®Œæˆ | å‡†ç¡®ç‡98.36% |
| âœ… æ–‡ä»¶ç”Ÿæˆ | å®Œæˆ | emails_real.csv, model.pkl, vectorizer.pkl |
| âš ï¸ æ•°æ®å¹³è¡¡ | éœ€æ”¹è¿› | Application 98%, å…¶ä»–ç±»åˆ«ä¸è¶³ |

---

## ğŸ“ˆ æ€§èƒ½å¯¹æ¯”

### Mockæ•°æ® vs çœŸå®æ•°æ®

| æŒ‡æ ‡ | Mockæ•°æ® | çœŸå®æ•°æ® |
|------|----------|----------|
| æ ·æœ¬æ•°é‡ | 62æ¡ | 302æ¡ |
| æ ‡ç­¾ç±»å‹ | 8ç§ | 3ç§ |
| æ•°æ®æ¥æº | æ‰‹å·¥ç¼–å†™ | Gmailå®é™…é‚®ä»¶ |
| æ•°æ®çœŸå®æ€§ | â­â­ | â­â­â­â­â­ |
| æ ‡ç­¾å¹³è¡¡æ€§ | â­â­â­â­â­ | â­â­ |
| æ¨èç”¨é€” | å¿«é€ŸåŸå‹ | ç”Ÿäº§ç¯å¢ƒ |

---

## ğŸ’¡ ä½¿ç”¨å»ºè®®

### é¦–æ¬¡ä½¿ç”¨
1. âœ… ä½¿ç”¨è‡ªåŠ¨åŒ–è„šæœ¬ `train_with_gmail.ps1` 
2. âœ… æŸ¥çœ‹ `TRAINING_SUMMARY.md` äº†è§£å½“å‰çŠ¶æ€
3. âœ… åœ¨Gmailä¸­æµ‹è¯•æ¨¡å‹æ•ˆæœ

### æ•°æ®æ”¶é›†é˜¶æ®µ
1. ğŸ“ æ‰‹åŠ¨æ ‡è®°æ›´å¤šé‚®ä»¶ï¼ˆç‰¹åˆ«æ˜¯å°‘æ•°ç±»åˆ«ï¼‰
2. ğŸ”„ æ¯å‘¨è¿è¡Œä¸€æ¬¡ `train_with_gmail.ps1 -SkipExport`
3. ğŸ“Š è·Ÿè¸ªæ¯æ¬¡è®­ç»ƒçš„å‡†ç¡®ç‡å˜åŒ–

### ç”Ÿäº§ç¯å¢ƒ
1. ğŸ¯ è¾¾åˆ°æ¯ç±»100+æ ·æœ¬åæŠ•å…¥ä½¿ç”¨
2. ğŸ“… æ¯æœˆé‡æ–°è®­ç»ƒä¸€æ¬¡
3. ğŸ’¾ ä¿ç•™å†å²æ¨¡å‹ç‰ˆæœ¬ç”¨äºå›æ»š

---

## ğŸ”§ å¸¸ç”¨å‘½ä»¤é€ŸæŸ¥

```bash
# ========== æ•°æ®å¯¼å‡º ==========
# å¯¼å‡ºæ”¶ä»¶ç®±é‚®ä»¶
node scripts/export-gmail-training-data.js --query "in:inbox" --maxResults 500

# å¯¼å‡ºæœ€è¿‘30å¤©
node scripts/export-gmail-training-data.js --query "newer_than:30d" --maxResults 200

# å¯¼å‡ºç‰¹å®šæ ‡ç­¾
node scripts/export-gmail-training-data.js --query "label:Application" --maxResults 100

# ========== æ•°æ®å‡†å¤‡ ==========
# å‡†å¤‡è®­ç»ƒæ•°æ®ï¼ˆè‡ªåŠ¨åˆå¹¶æ‰€æœ‰å¯¼å‡ºï¼‰
python prepare_training_data.py

# ========== æ¨¡å‹è®­ç»ƒ ==========
# ä½¿ç”¨çœŸå®æ•°æ®è®­ç»ƒ
python train_model.py --data emails_real.csv

# ä½¿ç”¨mockæ•°æ®è®­ç»ƒï¼ˆå¯¹æ¯”ï¼‰
python train_model.py --data emails.csv

# ========== ä¸€é”®å®Œæˆ ==========
# Windowså®Œæ•´æµç¨‹
.\train_with_gmail.ps1

# åªé‡æ–°è®­ç»ƒï¼ˆè·³è¿‡å¯¼å‡ºï¼‰
.\train_with_gmail.ps1 -SkipExport

# Linux/Macå®Œæ•´æµç¨‹
./train_with_gmail.sh

# ========== æŸ¥çœ‹æ•°æ® ==========
# æŸ¥çœ‹å¯¼å‡ºæ–‡ä»¶
ls backend/export/*.csv

# æŸ¥çœ‹æ ‡ç­¾åˆ†å¸ƒ
python -c "import pandas as pd; df=pd.read_csv('emails_real.csv'); print(df['label'].value_counts())"
```

---

## ğŸ“š æ¨èé˜…è¯»é¡ºåº

1. **é¦–æ¬¡ä½¿ç”¨**: 
   - ğŸ“– [ä½¿ç”¨çœŸå®æ•°æ®è®­ç»ƒ_å¿«é€Ÿå¼€å§‹.md](./ä½¿ç”¨çœŸå®æ•°æ®è®­ç»ƒ_å¿«é€Ÿå¼€å§‹.md)
   
2. **è¯¦ç»†å­¦ä¹ **: 
   - ğŸ“– [TRAIN_WITH_REAL_GMAIL_DATA.md](./TRAIN_WITH_REAL_GMAIL_DATA.md)
   
3. **æ—¥å¸¸å‚è€ƒ**: 
   - ğŸ“– [QUICK_TRAIN_REFERENCE.md](./QUICK_TRAIN_REFERENCE.md)
   
4. **æŸ¥çœ‹è¿›åº¦**: 
   - ğŸ“– [TRAINING_SUMMARY.md](./TRAINING_SUMMARY.md)

---

## ğŸ†˜ éœ€è¦å¸®åŠ©ï¼Ÿ

### å¸¸è§é—®é¢˜

**Q: Session IDåœ¨å“ªé‡Œæ‰¾ï¼Ÿ**  
A: åœ¨æµè§ˆå™¨Consoleä¸­è¿è¡Œ `localStorage.getItem('sessionId')`

**Q: ä¸ºä»€ä¹ˆæ²¡æœ‰ç”Ÿæˆè®­ç»ƒæ•°æ®ï¼Ÿ**  
A: ç¡®ä¿é‚®ä»¶å·²è¢«æ ‡è®°æ ‡ç­¾ï¼ŒæŸ¥çœ‹ `backend/export/` ç›®å½•

**Q: å¦‚ä½•æé«˜æ¨¡å‹å‡†ç¡®ç‡ï¼Ÿ**  
A: å¢åŠ è®­ç»ƒæ ·æœ¬ï¼Œå¹³è¡¡å„ç±»åˆ«æ•°é‡ï¼Œå®šæœŸé‡æ–°è®­ç»ƒ

**Q: å¯ä»¥ç”¨æ—§çš„æ¨¡å‹å—ï¼Ÿ**  
A: å¯ä»¥ï¼Œå¤‡ä»½åœ¨ `model_backups/` ç›®å½•

### è·å–æ›´å¤šå¸®åŠ©

- æŸ¥çœ‹é¡¹ç›®çš„å…¶ä»–æ–‡æ¡£
- æ£€æŸ¥ `backend/export/` ç›®å½•çš„CSVæ–‡ä»¶
- æŸ¥çœ‹è®­ç»ƒæ—¶çš„æ—¥å¿—è¾“å‡º

---

## ğŸŠ æ€»ç»“

ä½ ç°åœ¨æ‹¥æœ‰äº†ï¼š

âœ… **å®Œæ•´çš„è®­ç»ƒå·¥å…·é“¾**
- æ•°æ®å¯¼å‡º â†’ æ•°æ®å‡†å¤‡ â†’ æ¨¡å‹è®­ç»ƒ â†’ è‡ªåŠ¨å¤‡ä»½

âœ… **çµæ´»çš„ä½¿ç”¨æ–¹å¼**
- ä¸€é”®è‡ªåŠ¨åŒ–è„šæœ¬
- åˆ†æ­¥æ‰‹åŠ¨æ§åˆ¶
- å‘½ä»¤è¡Œå‚æ•°æ”¯æŒ

âœ… **è¯¦ç»†çš„æ–‡æ¡£**
- å¿«é€Ÿå¼€å§‹æŒ‡å—
- å®Œæ•´æ“ä½œæ‰‹å†Œ
- å‘½ä»¤é€ŸæŸ¥è¡¨

âœ… **çœŸå®çš„è®­ç»ƒç»“æœ**
- 302æ¡çœŸå®Gmailæ•°æ®
- 98.36%å‡†ç¡®ç‡æ¨¡å‹
- å¯ç«‹å³æŠ•å…¥ä½¿ç”¨

---

**å¼€å§‹ä½¿ç”¨å§ï¼ğŸš€**

å»ºè®®ä»ä¸€é”®è„šæœ¬å¼€å§‹ï¼š
```powershell
.\train_with_gmail.ps1
```

ç¥è®­ç»ƒæ„‰å¿«ï¼


