# JobTrack å®Œå…¨è‡ªåŠ¨åŒ–åŠŸèƒ½éªŒè¯æŒ‡å—

## ğŸ¯ éªŒè¯ç›®æ ‡

éªŒè¯ç”¨æˆ·è¿æ¥Gmailä¸€æ¬¡åï¼Œç³»ç»Ÿæ˜¯å¦èƒ½å¤Ÿå®Œå…¨è‡ªåŠ¨åŒ–è¿è¡Œï¼Œæ— éœ€ä»»ä½•æ‰‹åŠ¨æ“ä½œã€‚

## ğŸš€ å¿«é€ŸéªŒè¯

### æ–¹æ³•ä¸€ï¼šä¸€é”®éªŒè¯ï¼ˆæ¨èï¼‰

**Windows:**
```bash
quick-verify.bat
```

**Linux/Mac:**
```bash
./quick-verify.sh
```

### æ–¹æ³•äºŒï¼šæ‰‹åŠ¨éªŒè¯

```bash
node verify-automation.js
```

## ğŸ“‹ åˆ†æ­¥éªŒè¯

### æ­¥éª¤1ï¼šæ£€æŸ¥æœåŠ¡å™¨è¿è¡Œ

```bash
# æ£€æŸ¥åŸºæœ¬å¥åº·çŠ¶æ€
curl http://localhost:3000/health

# æ£€æŸ¥è¯¦ç»†çŠ¶æ€
curl http://localhost:3000/health/detailed
```

**é¢„æœŸç»“æœï¼š**
```json
{
  "status": "ok",
  "timestamp": "2025-01-11T...",
  "services": {
    "sessions": { "count": 0 },
    "autoScan": { "activeSessions": 0 }
  }
}
```

### æ­¥éª¤2ï¼šæ£€æŸ¥è‡ªåŠ¨ç®¡ç†å™¨

```bash
curl http://localhost:3000/api/auto-manager/status
```

**é¢„æœŸç»“æœï¼š**
```json
{
  "success": true,
  "manager": {
    "autoStartEnabled": true,
    "activeSessions": 0,
    "running": true
  },
  "sessions": []
}
```

### æ­¥éª¤3ï¼šæµ‹è¯•ç”¨æˆ·è®¤è¯

```bash
# æµ‹è¯•æ¨¡å¼ç™»å½•
curl -X POST http://localhost:3000/auth/test-login
```

**é¢„æœŸç»“æœï¼š**
```json
{
  "success": true,
  "sessionId": "test-xxxxx",
  "message": "Test mode login successful",
  "testMode": true
}
```

### æ­¥éª¤4ï¼šæµ‹è¯•è‡ªåŠ¨æ‰«æ

```bash
# ä½¿ç”¨ä¸Šä¸€æ­¥è·å¾—çš„sessionId
SESSION_ID="test-xxxxx"

# å¯åŠ¨è‡ªåŠ¨æ‰«æ
curl -X POST http://localhost:3000/api/gmail/auto-scan/start \
  -H "x-session-id: $SESSION_ID" \
  -H "Content-Type: application/json" \
  -d '{"query": "in:anywhere newer_than:2d", "maxResults": 10}'

# æ£€æŸ¥æ‰«æçŠ¶æ€
curl -H "x-session-id: $SESSION_ID" \
  http://localhost:3000/api/gmail/auto-scan/status

# æ‰§è¡Œç«‹å³æ‰«æ
curl -X POST http://localhost:3000/api/gmail/auto-scan/run-now \
  -H "x-session-id: $SESSION_ID" \
  -H "Content-Type: application/json" \
  -d '{"query": "in:anywhere newer_than:1d", "maxResults": 5}'
```

**é¢„æœŸç»“æœï¼š**
- è‡ªåŠ¨æ‰«æå¯åŠ¨æˆåŠŸ
- æ‰«æçŠ¶æ€æ˜¾ç¤º"running": true
- ç«‹å³æ‰«æè¿”å›å¤„ç†ç»“æœ

### æ­¥éª¤5ï¼šéªŒè¯tokenåˆ·æ–°æœºåˆ¶

```bash
# æ£€æŸ¥è®¤è¯çŠ¶æ€
curl -H "x-session-id: $SESSION_ID" \
  http://localhost:3000/auth/status
```

**é¢„æœŸç»“æœï¼š**
```json
{
  "authenticated": true,
  "sessionId": "test-xxxxx",
  "createdAt": "2025-01-11T..."
}
```

### æ­¥éª¤6ï¼šæµ‹è¯•é”™è¯¯æ¢å¤

```bash
# æµ‹è¯•æ— æ•ˆä¼šè¯çš„é”™è¯¯å¤„ç†
curl -H "x-session-id: invalid-session" \
  http://localhost:3000/api/gmail/auto-scan/status
```

**é¢„æœŸç»“æœï¼š**
- è¿”å›401é”™è¯¯æˆ–é€‚å½“çš„é”™è¯¯å“åº”
- ç³»ç»Ÿä¸ä¼šå´©æºƒ

## ğŸ”§ éªŒè¯ç¯å¢ƒå‡†å¤‡

### 1. å¯åŠ¨åç«¯æœåŠ¡

```bash
cd backend
npm run start:autoscan
```

### 2. æ£€æŸ¥ç¯å¢ƒé…ç½®

ç¡®ä¿ `.env` æ–‡ä»¶åŒ…å«å¿…è¦çš„é…ç½®ï¼š

```bash
# æ£€æŸ¥ç¯å¢ƒæ–‡ä»¶
cat backend/.env
```

**å¿…éœ€é…ç½®ï¼š**
```env
GOOGLE_CLIENT_ID=your_client_id
GOOGLE_CLIENT_SECRET=your_client_secret
GOOGLE_REDIRECT_URI=http://localhost:3000/auth/callback
```

### 3. æ£€æŸ¥ä¾èµ–å®‰è£…

```bash
cd backend
npm install
```

## ğŸ“Š éªŒè¯ç»“æœè§£è¯»

### âœ… æˆåŠŸæŒ‡æ ‡

1. **æœåŠ¡å™¨è¿è¡Œæ­£å¸¸**
   - å¥åº·æ£€æŸ¥è¿”å›200çŠ¶æ€
   - è¯¦ç»†çŠ¶æ€æ˜¾ç¤ºæœåŠ¡æ­£å¸¸

2. **è‡ªåŠ¨ç®¡ç†å™¨å·¥ä½œ**
   - autoStartEnabled: true
   - running: true
   - æ”¯æŒå¤šä¼šè¯ç®¡ç†

3. **è®¤è¯ç³»ç»Ÿæ­£å¸¸**
   - æµ‹è¯•æ¨¡å¼ç™»å½•æˆåŠŸ
   - ä¼šè¯IDæœ‰æ•ˆ
   - è®¤è¯çŠ¶æ€æ­£ç¡®

4. **è‡ªåŠ¨æ‰«æåŠŸèƒ½**
   - æ‰«æå¯åŠ¨æˆåŠŸ
   - çŠ¶æ€æ˜¾ç¤ºè¿è¡Œä¸­
   - ç«‹å³æ‰«ææ‰§è¡ŒæˆåŠŸ

5. **é”™è¯¯å¤„ç†æœºåˆ¶**
   - æ— æ•ˆè¯·æ±‚è¿”å›é€‚å½“é”™è¯¯
   - ç³»ç»Ÿä¸ä¼šå´©æºƒ
   - é”™è¯¯æ¢å¤æ­£å¸¸

### âŒ å¤±è´¥æŒ‡æ ‡

1. **æœåŠ¡å™¨æ— æ³•è®¿é—®**
   - è¿æ¥è¢«æ‹’ç»
   - è¶…æ—¶é”™è¯¯
   - ç«¯å£è¢«å ç”¨

2. **è®¤è¯å¤±è´¥**
   - è¿”å›401é”™è¯¯
   - ä¼šè¯æ— æ•ˆ
   - OAuthé…ç½®é”™è¯¯

3. **æ‰«æåŠŸèƒ½å¼‚å¸¸**
   - æ‰«æå¯åŠ¨å¤±è´¥
   - çŠ¶æ€æ˜¾ç¤ºåœæ­¢
   - APIè°ƒç”¨é”™è¯¯

## ğŸš¨ å¸¸è§é—®é¢˜è§£å†³

### é—®é¢˜1ï¼šæœåŠ¡å™¨æ— æ³•å¯åŠ¨

**ç—‡çŠ¶ï¼š** è¿æ¥è¢«æ‹’ç»æˆ–è¶…æ—¶

**è§£å†³æ–¹æ¡ˆï¼š**
```bash
# æ£€æŸ¥ç«¯å£å ç”¨
netstat -an | grep 3000

# æ£€æŸ¥è¿›ç¨‹
ps aux | grep node

# é‡å¯æœåŠ¡
pkill -f "node.*server.js"
cd backend && npm run start:autoscan
```

### é—®é¢˜2ï¼šè®¤è¯å¤±è´¥

**ç—‡çŠ¶ï¼š** è¿”å›401é”™è¯¯æˆ–è®¤è¯å¤±è´¥

**è§£å†³æ–¹æ¡ˆï¼š**
```bash
# æ£€æŸ¥OAuthé…ç½®
cat backend/.env | grep GOOGLE

# é‡æ–°é…ç½®OAuth
# å‚è€ƒ: GOOGLE_OAUTH_SETUP.md

# æ¸…ç†ä¼šè¯æ•°æ®
rm backend/data/sessions.json
```

### é—®é¢˜3ï¼šæ‰«æåŠŸèƒ½å¼‚å¸¸

**ç—‡çŠ¶ï¼š** æ‰«æå¯åŠ¨å¤±è´¥æˆ–çŠ¶æ€å¼‚å¸¸

**è§£å†³æ–¹æ¡ˆï¼š**
```bash
# æ£€æŸ¥è‡ªåŠ¨ç®¡ç†å™¨çŠ¶æ€
curl http://localhost:3000/api/auto-manager/status

# é‡å¯è‡ªåŠ¨ç®¡ç†å™¨
curl -X POST http://localhost:3000/api/auto-manager/start

# æ£€æŸ¥æ—¥å¿—
tail -f backend/logs/background.log
```

### é—®é¢˜4ï¼šç¯å¢ƒé…ç½®é”™è¯¯

**ç—‡çŠ¶ï¼š** å„ç§é…ç½®ç›¸å…³é”™è¯¯

**è§£å†³æ–¹æ¡ˆï¼š**
```bash
# æ£€æŸ¥ç¯å¢ƒæ–‡ä»¶
cat backend/.env

# æ£€æŸ¥ä¾èµ–
cd backend && npm list

# é‡æ–°å®‰è£…ä¾èµ–
rm -rf node_modules package-lock.json
npm install
```

## ğŸ“ˆ æ€§èƒ½éªŒè¯

### 1. å“åº”æ—¶é—´æµ‹è¯•

```bash
# æµ‹è¯•APIå“åº”æ—¶é—´
time curl http://localhost:3000/health
time curl http://localhost:3000/api/auto-manager/status
```

**é¢„æœŸï¼š** å“åº”æ—¶é—´ < 1ç§’

### 2. å¹¶å‘æµ‹è¯•

```bash
# æµ‹è¯•å¤šä¸ªå¹¶å‘è¯·æ±‚
for i in {1..5}; do
  curl -X POST http://localhost:3000/auth/test-login &
done
wait
```

**é¢„æœŸï¼š** æ‰€æœ‰è¯·æ±‚æˆåŠŸå¤„ç†

### 3. å†…å­˜ä½¿ç”¨ç›‘æ§

```bash
# ç›‘æ§å†…å­˜ä½¿ç”¨
ps aux | grep node
```

**é¢„æœŸï¼š** å†…å­˜ä½¿ç”¨åˆç†ï¼Œæ— å†…å­˜æ³„æ¼

## ğŸ¯ éªŒè¯æˆåŠŸæ ‡å‡†

### å®Œå…¨è‡ªåŠ¨åŒ–éªŒè¯é€šè¿‡æ ‡å‡†ï¼š

1. âœ… **æœåŠ¡å™¨ç¨³å®šè¿è¡Œ**
   - å¥åº·æ£€æŸ¥é€šè¿‡
   - æ— å´©æºƒæˆ–é”™è¯¯

2. âœ… **è‡ªåŠ¨ç®¡ç†å™¨æ­£å¸¸**
   - è‡ªåŠ¨å¯åŠ¨åŠŸèƒ½å¯ç”¨
   - å¤šä¼šè¯ç®¡ç†æ­£å¸¸

3. âœ… **è®¤è¯ç³»ç»Ÿå®Œå–„**
   - æµ‹è¯•æ¨¡å¼ç™»å½•æˆåŠŸ
   - ä¼šè¯ç®¡ç†æ­£å¸¸

4. âœ… **è‡ªåŠ¨æ‰«æåŠŸèƒ½**
   - æ‰«æå¯åŠ¨æˆåŠŸ
   - çŠ¶æ€ç›‘æ§æ­£å¸¸
   - ç«‹å³æ‰«ææ‰§è¡ŒæˆåŠŸ

5. âœ… **é”™è¯¯å¤„ç†æœºåˆ¶**
   - é”™è¯¯æ¢å¤æ­£å¸¸
   - ç³»ç»Ÿç¨³å®šæ€§è‰¯å¥½

6. âœ… **æ€§èƒ½è¡¨ç°è‰¯å¥½**
   - å“åº”æ—¶é—´åˆç†
   - èµ„æºä½¿ç”¨æ­£å¸¸

## ğŸ‰ éªŒè¯æˆåŠŸåçš„ä½“éªŒ

å½“æ‰€æœ‰éªŒè¯é€šè¿‡åï¼Œç”¨æˆ·å°†è·å¾—ä»¥ä¸‹å®Œå…¨è‡ªåŠ¨åŒ–ä½“éªŒï¼š

1. **ä¸€æ¬¡è¿æ¥ï¼Œæ°¸ä¹…ä½¿ç”¨**
   - ç”¨æˆ·åªéœ€è¿æ¥Gmailä¸€æ¬¡
   - ç³»ç»Ÿè‡ªåŠ¨å¼€å§‹æ‰«æ
   - æ— éœ€ä»»ä½•æ‰‹åŠ¨æ“ä½œ

2. **è‡ªåŠ¨ç»´æŠ¤**
   - è‡ªåŠ¨tokenåˆ·æ–°
   - è‡ªåŠ¨é”™è¯¯æ¢å¤
   - åå°æŒç»­è¿è¡Œ

3. **ç³»ç»Ÿé‡å¯æ¢å¤**
   - ç³»ç»Ÿé‡å¯åè‡ªåŠ¨æ¢å¤
   - æ‰€æœ‰ä¼šè¯è‡ªåŠ¨é‡æ–°å¯åŠ¨
   - é›¶äººå·¥å¹²é¢„

4. **å¤šç”¨æˆ·æ”¯æŒ**
   - æ”¯æŒå¤šä¸ªç”¨æˆ·åŒæ—¶ä½¿ç”¨
   - ç‹¬ç«‹çš„ä¼šè¯ç®¡ç†
   - å¹¶å‘æ‰«æå¤„ç†

**ğŸ¯ ç›®æ ‡è¾¾æˆï¼šç”¨æˆ·è¿æ¥Gmailä¸€æ¬¡åï¼Œç³»ç»Ÿå°†å®Œå…¨è‡ªåŠ¨åŒ–è¿è¡Œï¼Œæ— éœ€ä»»ä½•æ‰‹åŠ¨æ“ä½œï¼**
